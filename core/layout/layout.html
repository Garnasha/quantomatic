<html>
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>    
<script type="text/javascript">
function DoAJAXThing() {                                                                      
  var server = document.getElementById("server").value;
  var port = document.getElementById("port").value;
  var path = document.getElementById("path").value;
  var data_string = document.getElementById("data").value;

  // Set the URL to for the ajax call.
  var url = "http://" + server + ":" + port + "/" + path;

  if (data_string == "") {
    document.getElementById("status").innerHTML = 
      "Data can't be empty, it is: '" + document.getElementById("data").value 
      + "'";
  } else {
    // data_string = JSON.stringify(some_object);
    // data_string = JSON.stringify({ "message" : "hello" });
  }

  // Ajax call using jquery.
  $.ajax(
      { "url" : url,
        "data" : data_string,
        "contentType" : "application/json",
        "type" : "POST",
        "cache": false,
        "dataType" : "json",
        "success" :  function(data, textStatus, jqXHR) {
          document.getElementById("status").innertHTML = textStatus;
          document.getElementById("result").innerHTML = 
            JSON.stringify(data).replace(/\{/g,"<br>{");
        },
        "error" : function(jqXHR, textStatus, errorThrown){
          document.getElementById("status").innerHTML = 
          "<span class='error'>Failed to make AJAX query.</span>" 
          + "<br>Status: " + textStatus 
          + "<br>errorThrown: " + errorThrown 
          + "<br>jqXHR:" + JSON.stringify(jqXHR);
        }
      });
};

// when doc loads, make button get and loose the green class on mouse-over.
$(document).ready(function() {
   $("#run_button").hover(
     function() { $(this).addClass("green"); },
     function(){ $(this).removeClass("green"); });
 });
</script>
<style type="text/css">
.green { color: #0C0; }
</style>
</head>
<body>
<h1>Do an AJAX thing</h1>
A simple HTML/JS to do an AJAX call.
<p>
server: <input id="server" type="text" size="80" value="localhost" /><br>
port: <input id="port" type="text" size="80" value="8080" /><br>
path: <input id="path" type="text" size="80" value="hello" /><br>
data: <textarea id="data" cols="80" rows="5"></textarea><br>
<button id="run_button" onclick="DoAJAXThing();">Doit!</button>
</p>
<p/>
Status: <div id="status"></div>
<p/>
Result: <div id="status"></div>
<p/>
</body>
</html>
